{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Applications/MAMP/htdocs/Development/Nextjs/landing-page-prodcut-001/pages/dashboard/product.tsx\";\n\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport Link from 'next/link';\nimport { FormGroup, InputText, InputPrice, InputNumber } from '../../components/Form';\nimport { useMutation } from '@apollo/react-hooks';\nimport { MUTATION_ADD_PRODUCT, QUERY_PRODUCTS } from '../../graphql';\nimport { Button } from '../../components/Button';\nimport { Growing } from '../../components/Spinner';\n\nvar Product = function Product() {\n  var _useState = useState({\n    title: '',\n    price: 0,\n    inventory: 0\n  }),\n      state = _useState[0],\n      updateState = _useState[1];\n\n  var _useMutation = useMutation(MUTATION_ADD_PRODUCT, {\n    onError: function onError(error) {\n      console.log(error);\n    },\n    onCompleted: function onCompleted() {\n      return alert('Mutation Completed!');\n    }\n  }),\n      _useMutation2 = _slicedToArray(_useMutation, 2),\n      addProduct = _useMutation2[0],\n      _useMutation2$ = _useMutation2[1],\n      MutationLoading = _useMutation2$.loading,\n      MutationError = _useMutation2$.error;\n\n  var createProduct = function createProduct() {\n    addProduct({\n      variables: {\n        title: state.title,\n        price: state.price,\n        inventory: state.inventory\n      },\n      // optimisticResponse: {\n      //   __typename: 'Mutation',\n      //   addProduct: {\n      //     __typename: 'Product',\n      //     id: uuid(),\n      //     title: state.id,\n      //     price: state.price,\n      //     inventory: state.inventory,\n      //   },\n      // },\n      update: function update(cache, _ref) {\n        var addProduct = _ref.data;\n        var data = cache.readQuery({\n          query: QUERY_PRODUCTS\n        });\n        data.getProducts = [].concat(_toConsumableArray(data.getProducts), [addProduct]);\n        console.log('Query Data', data);\n        console.log('addProduct', addProduct);\n        cache.writeQuery({\n          query: QUERY_PRODUCTS,\n          data: data\n        });\n      }\n    });\n  };\n\n  var onChange = function onChange(e) {\n    var _e$target = e.target,\n        name = _e$target.name,\n        value = _e$target.value,\n        type = _e$target.type;\n\n    if (type === 'number') {\n      if (value < 0) return;\n      return updateState(function (prevState) {\n        return _objectSpread({}, prevState, _defineProperty({}, name, parseFloat(value)));\n      });\n    }\n\n    updateState(function (prevState) {\n      return _objectSpread({}, prevState, _defineProperty({}, name, value));\n    });\n  };\n\n  return __jsx(\"div\", {\n    className: \"col pt-5\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: \"container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, __jsx(Link, {\n    href: \"/dashboard/products\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    style: {\n      cursor: 'pointer',\n      marginBottom: '1rem'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 11\n    }\n  }, __jsx(\"svg\", {\n    className: \"bi bi-arrow-left-short\",\n    width: \"25px\",\n    height: \"25px\",\n    viewBox: \"0 0 16 16\",\n    fill: \"currentColor\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M7.854 4.646a.5.5 0 010 .708L5.207 8l2.647 2.646a.5.5 0 01-.708.708l-3-3a.5.5 0 010-.708l3-3a.5.5 0 01.708 0z\",\n    clipRule: \"evenodd\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  }), __jsx(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M4.5 8a.5.5 0 01.5-.5h6.5a.5.5 0 010 1H5a.5.5 0 01-.5-.5z\",\n    clipRule: \"evenodd\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 15\n    }\n  })), \"Products\")), __jsx(\"h3\", {\n    className: \"mb-5 font-weight-bold\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, \"Add Product\"), __jsx(\"div\", {\n    className: \"form-row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }\n  }, __jsx(InputText, {\n    onChange: onChange,\n    labelTitle: \"Title\",\n    name: \"title\",\n    placeholderTitle: \"Short sleeve t-shirt\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  })), __jsx(\"div\", {\n    className: \"form-row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }, __jsx(FormGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 11\n    }\n  }, __jsx(InputPrice, {\n    onChange: onChange,\n    labelTitle: \"Price\",\n    value: state.price,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  })), __jsx(FormGroup, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }, __jsx(InputNumber, {\n    onChange: onChange,\n    labelTitle: \"Inventory\",\n    name: \"inventory\",\n    value: state.inventory,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }))), __jsx(Button, {\n    mutationLoading: false,\n    onClick: function onClick() {\n      return createProduct();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, __jsx(Growing, {\n    visible: MutationLoading,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 11\n    }\n  }), MutationLoading ? ' Loading...' : 'Save', MutationError ? 'Network error occured.' : '')));\n};\n\nexport default Product;","map":{"version":3,"sources":["/Applications/MAMP/htdocs/Development/Nextjs/landing-page-prodcut-001/pages/dashboard/product.tsx"],"names":["React","useState","Link","FormGroup","InputText","InputPrice","InputNumber","useMutation","MUTATION_ADD_PRODUCT","QUERY_PRODUCTS","Button","Growing","Product","title","price","inventory","state","updateState","onError","error","console","log","onCompleted","alert","addProduct","MutationLoading","loading","MutationError","createProduct","variables","update","cache","data","readQuery","query","getProducts","writeQuery","onChange","e","target","name","value","type","prevState","parseFloat","cursor","marginBottom"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport Link from 'next/link';\nimport {\n  FormGroup,\n  InputText,\n  InputPrice,\n  InputNumber,\n} from '../../components/Form';\nimport { useMutation } from '@apollo/react-hooks';\nimport { MUTATION_ADD_PRODUCT, QUERY_PRODUCTS } from '../../graphql';\nimport { Button } from '../../components/Button';\nimport { Growing } from '../../components/Spinner';\nimport { v4 as uuid } from 'uuid';\n\nexport interface ProductState {\n  title: string;\n  price: number;\n  inventory: number;\n}\n\nexport interface ProductProps {}\n\nconst Product: React.SFC<ProductProps> = () => {\n  const [state, updateState]: any = useState<ProductState>({\n    title: '',\n    price: 0,\n    inventory: 0,\n  });\n\n  const [\n    addProduct,\n    { loading: MutationLoading, error: MutationError },\n  ] = useMutation(MUTATION_ADD_PRODUCT, {\n    onError: (error) => {\n      console.log(error);\n    },\n    onCompleted: () => alert('Mutation Completed!'),\n  });\n\n  const createProduct = () => {\n    addProduct({\n      variables: {\n        title: state.title,\n        price: state.price,\n        inventory: state.inventory,\n      },\n      // optimisticResponse: {\n      //   __typename: 'Mutation',\n      //   addProduct: {\n      //     __typename: 'Product',\n      //     id: uuid(),\n      //     title: state.id,\n      //     price: state.price,\n      //     inventory: state.inventory,\n      //   },\n      // },\n      update: (cache: any, { data: addProduct }): any => {\n        const data = cache.readQuery({ query: QUERY_PRODUCTS });\n\n        data.getProducts = [...data.getProducts, addProduct];\n\n        console.log('Query Data', data);\n\n        console.log('addProduct', addProduct);\n\n        cache.writeQuery({\n          query: QUERY_PRODUCTS,\n          data,\n        });\n      },\n    });\n  };\n\n  const onChange = (e) => {\n    const { name, value, type } = e.target;\n\n    if (type === 'number') {\n      if (value < 0) return;\n\n      return updateState((prevState) => ({\n        ...prevState,\n        [name]: parseFloat(value),\n      }));\n    }\n\n    updateState((prevState) => ({\n      ...prevState,\n      [name]: value,\n    }));\n  };\n\n  return (\n    <div className=\"col pt-5\">\n      <div className=\"container\">\n        <Link href=\"/dashboard/products\">\n          <div\n            style={{\n              cursor: 'pointer',\n              marginBottom: '1rem',\n            }}\n          >\n            <svg\n              className=\"bi bi-arrow-left-short\"\n              width=\"25px\"\n              height=\"25px\"\n              viewBox=\"0 0 16 16\"\n              fill=\"currentColor\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <path\n                fillRule=\"evenodd\"\n                d=\"M7.854 4.646a.5.5 0 010 .708L5.207 8l2.647 2.646a.5.5 0 01-.708.708l-3-3a.5.5 0 010-.708l3-3a.5.5 0 01.708 0z\"\n                clipRule=\"evenodd\"\n              />\n              <path\n                fillRule=\"evenodd\"\n                d=\"M4.5 8a.5.5 0 01.5-.5h6.5a.5.5 0 010 1H5a.5.5 0 01-.5-.5z\"\n                clipRule=\"evenodd\"\n              />\n            </svg>\n            Products\n          </div>\n        </Link>\n        <h3 className=\"mb-5 font-weight-bold\">Add Product</h3>\n        <div className=\"form-row\">\n          <InputText\n            onChange={onChange}\n            labelTitle=\"Title\"\n            name=\"title\"\n            placeholderTitle=\"Short sleeve t-shirt\"\n          />\n        </div>\n        <div className=\"form-row\">\n          <FormGroup>\n            <InputPrice\n              onChange={onChange}\n              labelTitle=\"Price\"\n              value={state.price}\n            />\n          </FormGroup>\n          <FormGroup>\n            <InputNumber\n              onChange={onChange}\n              labelTitle=\"Inventory\"\n              name=\"inventory\"\n              value={state.inventory}\n            />\n          </FormGroup>\n        </div>\n        <Button mutationLoading={false} onClick={() => createProduct()}>\n          <Growing visible={MutationLoading} />\n          {MutationLoading ? ' Loading...' : 'Save'}\n          {MutationError ? 'Network error occured.' : ''}\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default Product;\n"]},"metadata":{},"sourceType":"module"}