{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { v4 as uuid } from 'uuid';\nexport const submitPrice = (updater, query, price) => {\n  updater({\n    variables: {\n      price\n    },\n    optimisticResponse: {\n      __type: 'Mutation',\n      updatePrice: {\n        __typename: 'Product',\n        id: uuid(),\n        price\n      }\n    },\n    update: (cache, {\n      data: {\n        updatePrice\n      }\n    }) => {\n      const data = cache.readQuery({\n        query\n      });\n      cache.writeQuery({\n        query,\n        data: _objectSpread({}, data, {\n          getProduct: _objectSpread({}, data.getProduct, {\n            updatePrice\n          })\n        })\n      });\n    }\n  });\n};","map":{"version":3,"sources":["/Applications/MAMP/htdocs/Development/Nextjs/landing-page-prodcut-001/utils/price.ts"],"names":["v4","uuid","submitPrice","updater","query","price","variables","optimisticResponse","__type","updatePrice","__typename","id","update","cache","data","readQuery","writeQuery","getProduct"],"mappings":";;;;;;AAAA,SAASA,EAAE,IAAIC,IAAf,QAA2B,MAA3B;AAEA,OAAO,MAAMC,WAAW,GAAG,CAACC,OAAD,EAAeC,KAAf,EAA2BC,KAA3B,KAA6C;AACtEF,EAAAA,OAAO,CAAC;AACNG,IAAAA,SAAS,EAAE;AAAED,MAAAA;AAAF,KADL;AAENE,IAAAA,kBAAkB,EAAE;AAClBC,MAAAA,MAAM,EAAE,UADU;AAElBC,MAAAA,WAAW,EAAE;AACXC,QAAAA,UAAU,EAAE,SADD;AAEXC,QAAAA,EAAE,EAAEV,IAAI,EAFG;AAGXI,QAAAA;AAHW;AAFK,KAFd;AAUNO,IAAAA,MAAM,EAAE,CAACC,KAAD,EAAQ;AAAEC,MAAAA,IAAI,EAAE;AAAEL,QAAAA;AAAF;AAAR,KAAR,KAAsC;AAC5C,YAAMK,IAAS,GAAGD,KAAK,CAACE,SAAN,CAAgB;AAChCX,QAAAA;AADgC,OAAhB,CAAlB;AAIAS,MAAAA,KAAK,CAACG,UAAN,CAAiB;AACfZ,QAAAA,KADe;AAEfU,QAAAA,IAAI,oBACCA,IADD;AAEFG,UAAAA,UAAU,oBAAOH,IAAI,CAACG,UAAZ;AAAwBR,YAAAA;AAAxB;AAFR;AAFW,OAAjB;AAOD;AAtBK,GAAD,CAAP;AAwBD,CAzBM","sourcesContent":["import { v4 as uuid } from 'uuid';\n\nexport const submitPrice = (updater: any, query: any, price: number) => {\n  updater({\n    variables: { price },\n    optimisticResponse: {\n      __type: 'Mutation',\n      updatePrice: {\n        __typename: 'Product',\n        id: uuid(),\n        price,\n      },\n    },\n    update: (cache, { data: { updatePrice } }) => {\n      const data: any = cache.readQuery({\n        query,\n      });\n\n      cache.writeQuery({\n        query,\n        data: {\n          ...data,\n          getProduct: { ...data.getProduct, updatePrice },\n        },\n      });\n    },\n  });\n};\n"]},"metadata":{},"sourceType":"module"}